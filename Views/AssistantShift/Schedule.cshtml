<div class="container mt-4">
    @if (User.IsInRole(Web_prog_Project.Utility.Helper.Admin))
    {
        <div class="row align-items-center mb-3">
            <div class="col-md-6">
                <h2 class="text-primary">
                    Shift Management
                </h2>
            </div>
            <div class="col-md-6 text-end">
                <a asp-controller="AssistantShift" asp-action="Create" class="btn btn-primary">
                    <i class="bi bi-plus-circle"></i> Add Shift
                </a>
            </div>
        </div>
    }

    <!-- Calendar Section -->
    <div class="card shadow-sm">
        <div class="card-header bg-primary text-white">
            <h5 class="mb-0">Shift Calendar</h5>
        </div>
        <div class="card-body">
            <div id="shiftCalendar" class="border rounded" style="padding: 10px;"></div>
        </div>
    </div>
</div>

<style>
    /* Restore grid lines between dates in FullCalendar */
    .fc .fc-daygrid-day {
        border: 1px solid #dee2e6; /* Light gray border similar to Bootstrap tables */
    }

    .fc .fc-daygrid-body table {
        border-collapse: separate; /* Ensure cell borders are distinct */
    }

    .fc .fc-daygrid-day-top {
        font-weight: bold; /* Highlight the day number */
    }

    /* Optional: Add hover effect for better interaction */
    .fc .fc-daygrid-day:hover {
        background-color: #f8f9fa; /* Light gray background on hover */
    }
</style>

<script>
    console.log(@Html.Raw(Json.Serialize(ViewData["Shifts"])));

    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('shiftCalendar');
        var calendar = new FullCalendar.Calendar(calendarEl, {
            initialView: 'dayGridMonth',
            headerToolbar: {
                left: 'prev,next today',
                center: 'title',
                right: 'dayGridMonth,timeGridWeek,timeGridDay'
            },
            events: @Html.Raw(Json.Serialize(ViewData["Shifts"])), // Serialize the events from ViewData to JavaScript
            themeSystem: 'bootstrap',
            editable: true,
            droppable: true
        });
        calendar.render();
    });
</script>
